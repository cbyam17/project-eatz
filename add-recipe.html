<!DOCTYPE html>
<html  >
<head>
  <!-- Site made with Mobirise Website Builder v5.2.0, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v5.2.0, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/hat-chef-logo-and-symbols-vector-template-123x98.jpeg" type="image/x-icon">
  <meta name="description" content="">
  
  
  <title>Add Recipe</title>
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css"><link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  
  <script type="text/javascript" src="assets/web/assets/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="assets/web/assets/jquery/jquery.serializejson.js"></script>
  
</head>
<body>
  
  <section class="menu cid-s48OLK6784" once="menu" id="menu1-m">
    
    <nav class="navbar navbar-dropdown navbar-fixed-top collapsed">
        <div class="container">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="index.html">
                        <img src="assets/images/hat-chef-logo-and-symbols-vector-template-123x98.jpeg" alt="Mobirise" style="height: 3.8rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap"><a class="navbar-caption text-black text-primary display-7" href="index.html">project eatz</a></span>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true"><li class="nav-item"><a class="nav-link link text-black text-primary display-4" href="about-us.html">
                            About us</a></li><li class="nav-item"><a class="nav-link link text-black text-primary display-4" href="add-recipe.html">
                            Add a Recipe</a></li><li class="nav-item"><a class="nav-link link text-black text-primary display-4" href="browse-recipes.html">
                            Browse Recipes</a></li></ul>
                
                
            </div>
        </div>
    </nav>

</section>
  
     <!-- <form  action="https://d8qga9j6ob.execute-api.us-east-1.amazonaws.com/dev/recipe" method="post" enctype="application/x-www-form-urlencoded" name="addRecipeForm" id="addRecipeForm" accept-charset="utf-8" autocomplete="on"> -->
     <form name="addRecipeForm" id="addRecipeForm" accept-charset="utf-8" autocomplete="on">        
		<!-- Recipe name form and headers for page -->
        <h1 class="display-3"> Add a Recipe! </h1>
        <h1 class="display-3.5"> Give Your Recipe a Fancy Name! </h1>
        <div id = recipeName>
            <div class="col-sm-12 col-md-4">
                <input type = "text" class = "form-control" placeholder = "Recipe Name" name="recipeName" id="recipeName">
            </div>
        </div>

        <!-- Drop down bar menu for meal type -->
        <br><h3> What Type of Meal is it? </h3>
        <div id = mealType>
            <label class="sm-2" for="inlineformcustomselect"> Type </label>
                <select class="custom-select sm-2" name="category" id="category">
                <option selected> Choose...</option>
                <option value="App">App</option>
                <option value="Main">Main</option>
                <option value="Dessert">Dessert</option>
                <option value="Other">Other</option>
            </select>
        </div>

        <!-- Table which holds each ingredient -->
        <br><h3> Ingredients </h3>
        <div class = "Ingredients">
			<table id="ingredientsTable" class="table ingr-list">
				<!-- Headers-->
				<thead>
					<tr>
						<td><b>Name</b></td>
						<td><b>Amount</b></td>
						<td><b>Measure</b></td>
						<td><b>Notes</b></td>
					</tr>
				</thead>
				<!-- Preexisting forms -->
				<tbody>
					<tr>
						<td>
							<input type="text" name = "ingredients[][name]" id="name" class="form-control"/>
						</td>
						<td>
							<input type="number" name = "ingredients[][amount]" id="amount"  class="form-control"/>
						</td>
						<td>
							<input type="text" name = "ingredients[][measure]" id="measure"  class="form-control"/>
						</td>
						<td>
							<input type="text" name = "ingredients[][notes]" id="notes"  class="form-control"/>
						</td>
						<td><a class="delRowHolder"></a></td>
					</tr>
				</tbody>
				<!-- Add Ingredient Button under table -->
				<tfoot>
					<tr>
						<td colspan="1">
							<input type="button" class="btn-success" id="addIngredient" value="Add Ingredient"/>
						</td>
					</tr>
				</tfoot>
			</table>
        </div>

        <!-- Notes section for ingredients
        <h3>Special Ingredient Notes</h3>
        <div id = "notes">
            <textarea class="form-control" rows="3" placeholder="Notes"></textarea>
        </div> -->

        <!-- Instruction to make the recipe,
        ** This section will be chagned to comply with dynamic step by step logic -->
        <!-- <br><h3> Instructions </h3>
        <div id = "instructions">
            <textarea class="form-control" rows="5"></textarea>
        </div> -->
		
		<br><h3> Directions </h3>
		<div class = "Ingredients">
			<table id= "directionsTable" class="table ingr-list">
				<!-- Headers-->
				<!-- Preexisting forms -->
				<tbody>
					<tr>
						<td>
							 <textarea class="form-control" rows="2" name="directions[]" id="direction"></textarea>
						</td>
						<td><a class="delRowHolder"></a></td>
					</tr>
				</tbody>
				<!-- Add Instruction Button under table -->
				<tfoot>
					<tr>
						<td colspan="1">
							<input type="button" class="btn-success" id="addDirection" value="Add Direction"/>
						</td>
					</tr>
				</tfoot>
			</table>
        </div>

        <!-- Upload image of the meal -->
        <br><h3>Upload a Picture of your meal! </h3>
        <div id="mealPicture">
            <label class="form-label" for="cusotmFile"> Select the Image from Files</label>
            <input type="file" class="form-control" name="picture" id="picture" />
        </div>

        <!-- submit button for the form to be sent -->
        <div id="submitButton">
            <br><button type="submit"> Submit Recipe</button>
        </div>
    </form>
	
	<script>
	/* 
   Javascript file for add-recipe.html
   uses Jquery click commands to call functions and add columns to the table
   Version: 1.0.1
*/

$(document).ready(function () {
    var counter = 0;

    // function which is called when Div ID = addIngredient is clicked (AKA add Ingredient button)
    $("#addIngredient").on("click", function () {
    	var newRow = $("<tr>");
        var cols = "";

        // forms that will be added
		cols += '<td><input type="text" class="form-control" name = "ingredients[][name]" id="name"/></td>';
        cols += '<td><input type="number" class="form-control" name = "ingredients[][amount]" id="amount"/></td>';
        cols += '<td><input type="text" class="form-control" name = "ingredients[][measure]" id="measure"/></td>';        
		cols += '<td><input type="text" class="form-control" name = "ingredients[][notes]" id="notes"/></td>';
        cols += '<td><input type="button" class="btnDel" value="Remove Ingredient"></td>';
        newRow.append(cols);
        $("#ingredientsTable tbody").append(newRow);
        counter++;
    });
	
	// function which is called when Div ID = addInstruction is clicked (AKA add Instruction button)
    $("#addDirection").on("click", function () {
    	var newRow = $("<tr>");
        var cols = "";

        // forms that will be added
        cols += '<td><textarea class="form-control" rows="2" name="directions[]" id="direction"></textarea></td>';
        cols += '<td><input type="button" class="btnDel" value="Remove Direction"></td>';
        newRow.append(cols);
        $("#directionsTable tbody").append(newRow);
        counter++;
    });
	
    // function which is called when class = btnDel is called (AKA Remove Ingredient button)
    $("table.ingr-list").on("click",".btnDel",function (event) {
        $(this).closest("tr").remove();       
        counter -= 1;
    });
	
});

	$("#addRecipeForm").submit(function() {
		
		//serialize form data as formatted JSON object (this doesn't capture the picture)
		var obj = $(this).serializeJSON();
		var jsonString = JSON.stringify(obj);
	
		//call api to add recipe
		$.post( "https://d8qga9j6ob.execute-api.us-east-1.amazonaws.com/dev/recipe", jsonString);
		
		//code to be implemented later for uploading the image to AWS s3
		
	});
</script>
  
</body>
</html>